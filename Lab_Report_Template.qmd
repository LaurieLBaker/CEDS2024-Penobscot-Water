---
title: "Water Quality Lab Report Template"
format: html
editor: visual
execute:
  echo: false
  warning: false
---

```{r install.packages, include=FALSE}
library(tidyverse)
library(quarto)
library(dplyr)
library(devtools)
library(readr)
library(gt) #for tables
library(stringr)
library(htmltools)
library(lubridate)
```

```{r load_data}
data2018 <- readRDS("data/PINCommEngData (2).RData")
```

## Lab Report Header {.smaller}

### Collector: JRP

Run Date: **2018-09-19** Run: **Passadumkeag**

```{r}

#LabAnalysisDate <- as.Date(data2018$LabAnalysisDatetime)
#SampleCollectionDate <- as.Date(as.numeric(data2018$SampleDatetime)) %>%
  #is.na() %>%
  #format(SampleCollectionDate, "%Y-%m-%d")

#SampleCollectionDate <- as.numeric(data2018$SiteVisitStartTime)
#LabAnalysisDate <- as.numeric(data2018$LabAnalysisDatetime)


#HoldTime <- period("09-25-2018 10:41:09", "09-25-2018 10:29:07")

#date_1 = as.Date("2020-05-01") 
#date_2 = as.Date("2020-06-01")

#difftime(date_1, date_2, "days")

data2018$SampleDatetime <- as.POSIXct(data2018$SampleDatetime, format = "%m/%d/%Y %H:%M:%S")
data2018$LabAnalysisDatetime <- as.POSIXct(data2018$LabAnalysisDatetime, format = "%m/%d/%Y %H:%M:%S")

data2018 %>%
  filter(SiteVisitID == "JanS5-2018925102747") %>%
  select(SiteCode, SampleDatetime, ResultValue, QCType, ResultFlag_ID, IncubationLength, LabAnalysisDatetime) %>%
  #period(c("2018-09-26 10:41:09", "9/25/2018 10:29:07"), c("day", "hour", "minute")) %>%
  #mutate(HoldTime = LabAnalysisDate - SampleCollectionDate) %>%
  distinct() %>% 
  gt() %>%
  cols_align(align = "center") %>%
   tab_style(
    style = cell_borders(
      sides = c("all"),
      color = "black",
      weight = px(1),
      style = "solid"),
    locations = list(cells_body(), cells_column_labels()))

```

```{r}
#c <- data2018 %>%
#  filter(Collector == "JRP", RunCode == "Passadumkeag", #RunDate == "2018-09-19")

#data2018 %>%
#  mutate(
 #   Constituents = case_when(
 #     Constituents == "Msmt" ~ Const,
#      TRUE ~ Constituents
#    ),
 #   ResultValue = coalesce(Result, ResultValue)) %>%
 # filter(Collector == "JRP", RunCode == "Passadumkeag", #RunDate == "2018-09-19") %>%
#  select(SiteCode, SiteVisitStartTime, Constituents, ResultValue, QCType, IncubationLength, LabAnalysisDatetime, SampleDatetime) %>%
 # gt()
```
