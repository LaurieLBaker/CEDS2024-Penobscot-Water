---
title: "Sample Information"
author: "Cedar Callahan"
format:
  html:
    toc: true
params:
  Collectors: "JRP;"
---

```{r load-packages-and-data, echo = FALSE, message = FALSE, warning = FALSE}
library(tidyverse)
library(data.table)
library(gt)
library(purrr)
library(quarto)
library(here)
library(knitr)
library(rlang)
library(kableExtra)
library(tibble)
library(rmarkdown)

data2018 <- readRDS("data/PINCommEngData (2).RData")

data <- filter(data2018, Collectors == params$Collectors)
```


```{r echo = FALSE, message = FALSE, warning = FALSE}
collectors <- data %>%
  filter(Collectors == params$Collectors) %>% 
  distinct(Collectors) %>%
  pull()

rundate <- data %>% 
  filter(RunDate == RunDate) %>%
  select(RunDate) %>% 
  pull()

runcode <- data %>% 
  filter(RunCode == RunCode) %>% 
  select(RunCode) %>% 
  pull()

sitecode <- data %>% 
  filter(SiteCode == SiteCode) %>% 
  select(SiteCode) %>% 
  pull()
```

```{r echo = FALSE, message = FALSE, warning = FALSE}
#| output: asis
#|
Collector <- map_chr(collectors, \(current_Collectors){
  knit_child(
    input = "samples_child_doc.qmd",
    envir = env(), 
    quiet = TRUE
    )
})

cat(Collector, sep = "\n")
```

<<<<<<< HEAD
files_out <- tolower(collectors) %>% 
  str_replace_all(" ", "_") %>% 
  paste0(., "_report.html")


map2(
  collectors, 
  files_out,
  knit(
    input = "test_field_child_doc.qmd",
    output = NULL
  )
)
=======
```{r echo = FALSE, message = FALSE, warning = FALSE}
# #| output: asis
# 
# collectors <- unique(data2018$Collectors)
# 
# files_out <- tolower(collectors) %>%
#   str_replace_all(" ", "_") %>%
#   paste0(., "_report.html")
# 
# 
# map2(
#   collectors,
#   files_out,
#   knit(
#     input = "samples_child_doc.qmd",
#     output = NULL
#   )
# )
>>>>>>> 8e32040 (Create additional vectors for parameters)
```


